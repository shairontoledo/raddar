<% page_title @forum.name %>

<div class="page-header">
  <h1><%= @forum.name %></h1>
</div>

<div class="well">
  <%= simple_text @forum.description %>
</div>

<%= render 'followers/link_with_count', {followable: @forum} %>
<br/>
<%= render 'followers/follow_button', {followable: @forum} if user_signed_in? %>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th><%= t 'topic.last' %></th>
      <th><%= t 'post.p' %></th>
      <th><%= t 'topic.views' %></th>
      <th><%= t 'post.last' %></th>
    </tr>
  </thead>
  <tbody>
  <% @topics.each do |topic| %>
    <tr>
      <td><%= link_to topic.name, forum_topic_path(@forum,topic) %></td>
      <td><%= topic.posts.count %></td>
      <td><%= topic.views %></td>
      <td>
        <% last = topic.posts.last %>
        <% unless last.blank? %>
          <%= link_to raw("#{last.user.name}, #{time_tag last.created_at, humanize_datetime(last.created_at)}"), last.url %>
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= will_paginate @topics %>
<%= link_to t('topic.new'), new_forum_topic_path(@forum), :class => 'btn' if can? :new, Topic %>